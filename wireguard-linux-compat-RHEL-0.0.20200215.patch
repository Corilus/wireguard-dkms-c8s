From 27ce49e385a87cb784368a0995f8284fd6887d8c Mon Sep 17 00:00:00 2001
From: Luis Ressel <aranea@aixah.de>
Date: Sat, 15 Feb 2020 14:33:44 +0100
Subject: compat: RHEL 7 backported skb_ensure_writable()

Reported-by: chotaire <chotaire@chotaire.net>
Signed-off-by: Luis Ressel <aranea@aixah.de>
Signed-off-by: Jason A. Donenfeld <Jason@zx2c4.com>
---
 src/compat/compat.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/compat/compat.h b/src/compat/compat.h
index 0d109be..1aa0e7b 100644
--- a/src/compat/compat.h
+++ b/src/compat/compat.h
@@ -932,7 +932,7 @@ static inline void skb_mark_not_on_list(struct sk_buff *skb)
 #define chacha20_neon zinc_chacha20_neon
 #endif

-#if LINUX_VERSION_CODE < KERNEL_VERSION(3, 19, 0)
+#if LINUX_VERSION_CODE < KERNEL_VERSION(3, 19, 0) && !defined(ISRHEL7)
 #include <linux/skbuff.h>
 static inline int skb_ensure_writable(struct sk_buff *skb, int write_len)
 {
--
cgit v1.2.2-4-g43a45

